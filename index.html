<!DOCTYPE html>
<html>
<head>
	<title>Tic Tac Toe</title>
	<link rel="stylesheet" type="text/css" href="main.css">
	<!-- jQuery -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>


	<script type="text/javascript">
	
		var turn = 0;
		var winningCombinations;
		var painted;
		var content;
		var isWinner = false;


		$(document).ready(function(){
		    painted = new Array();
		    content = new Array();
		    winningCombinations = [[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];

		// Create board
			for (var i = 0; i < 9; i++) {
				$('#board').append('<div class="box" id="box'+ i +'"></div>');
			}

		// create arrays with empty values
			function createArrays() {
			    for(var l = 0; l <= 8; l++){
				    painted[l] = false;
				    content[l]='';
			    }
			}
			createArrays();

		// when box is clicked
			$('.box').click(function(event) {
				var boxPosition = $(".box").index(this);
				// alert("That was div index #" + boxPosition);

				if(isWinner==false){
					boxClicked(boxPosition);
					checkForWinners(content[boxPosition]);
				}
			});

			$("#startover").click(function() {
				turn = 0;
				createArrays();
				$('.box').removeClass('red');
				$('.box').removeClass('blue');
			});
		});




// Everytime a box is clicked:
	// check if the box clicked is already filled if so, ALERT USER else
	// Mark box with correct symbol, log box has been filled and log users symbol
	// check for any winners if so, ALERT USER AND END GAME, else do nothing.
		function boxClicked(boxNumber) {

		    theBox = "box"+boxNumber;


			if (painted[boxNumber] == false) { // this condition tell us if the box is empty then...
				// who's turn is it
	        	if(turn%2==0) { //first turn
	        		content[boxNumber] = 'X';
	        		$('#' + theBox).addClass("red");
				}
				else { //secont turn
					content[boxNumber] = "O";
	        		$('#' + theBox).addClass("blue");
				}

				turn++;
				painted[boxNumber] = true;
				if(turn==9) {
					alert("The Game is over");
				}				
			}
			else {
				alert("That Space is already filled");
			}
		}


		function checkForWinners(symbol) {
		    for(var a = 0; a < winningCombinations.length; a++) {
			    if(content[winningCombinations[a][0]]==symbol&&content[winningCombinations[a][1]]== symbol&&content[winningCombinations[a][2]]==symbol) {
			        alert(symbol+ " WON!");
			        isWinner = true;
			    }
		    }
		}

	</script>
</head>
<body>
	<h1>Tic Tac Toe</h1>
	<div id="board"></div>
	<button id="startover">Start Over</button>
</body>
</html>